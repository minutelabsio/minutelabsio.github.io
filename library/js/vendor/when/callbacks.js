/** @license MIT License (c) copyright 2013 original author or authors */

(function(e){e(["require","./when"],function(e){function i(e,t){return s(e,this,t)}function s(e,r,i){return t.all(i||[]).then(function(t){return n(function(n,i){var s=t.concat(c(n),c(i));e.apply(r,s)})})}function o(e){return s(e,this,r.call(arguments,1))}function u(e){var t=r.call(arguments,1);return function(){return s(e,this,t.concat(r.call(arguments)))}}function a(e,r){return function(){var i=this;return t.all(arguments).then(function(t){function s(n,s){var o,u;"callback"in r&&(o=f(t,r.callback)),"errback"in r&&(u=f(t,r.errback)),u<o?(l(t,u,s),l(t,o,n)):(l(t,o,n),l(t,u,s)),e.apply(i,t)}return n(s)})}}function f(e,t){return t<0?e.length+t+2:t}function l(e,t,n){t!=null&&(n=c(n),t<0&&(t=e.length+t+2),e.splice(t,0,n))}function c(e){return function(){arguments.length<=1?e.apply(this,arguments):e.call(this,r.call(arguments))}}var t,n,r;return t=e("./when"),n=t.promise,r=[].slice,{apply:i,call:o,lift:u,bind:u,promisify:a}})})(typeof define=="function"&&define.amd?define:function(e){module.exports=e(require)});