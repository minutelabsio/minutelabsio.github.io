define(["jquery","stapes"],function(e,t){function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})}var r=t.subclass({rules:{},constructor:function(){var t=this;t.initEvents(),e(function(){t.emit("domready")})},initEvents:function(){var e=this;e.on("domready",e.onDomReady)},onDomReady:function(){var e=this;e.scan("body")},scan:function(t,n){function a(e){return function(t){r.register(e,t)}}var r=this,i=typeof n,s=r.rules,o,u;t=e(t);if(!n)for(n in s)s[n](t,n,a(n));else if(i==="string")u=s[n],u&&u(t,n,a(n));else if(n.length)for(var f=0,l=n.length;f<l;++f)u=s[n[f]],u&&u(t,n[f],a(n[f]))},register:function(e,t){var r=this,i=n(),s=e+"."+i;r.set(s,t),r.emit("module-created",e),r.emit("module-created:"+e,t)}});return new r});